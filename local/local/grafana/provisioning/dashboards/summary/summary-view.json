{
   "__inputs": [ ],
   "__requires": [ ],
   "annotations": {
      "list": [ ]
   },
   "editable": true,
   "gnetId": null,
   "graphTooltip": 0,
   "hideControls": false,
   "id": null,
   "links": [
      {
         "asDropdown": false,
         "icon": "dashboard",
         "includeVars": true,
         "tags": [
            "summary-view"
         ],
         "title": "summary-view",
         "type": "dashboards"
      }
   ],
   "panels": [
      {
         "datasource": "prometheus",
         "fieldConfig": {
            "defaults": {
               "custom": {
                  "align": "left"
               },
               "links": [
                  {
                     "title": "${__data.fields.service} product view",
                     "url": "/d/${__data.fields.service}-product-view?${environment:queryparam}"
                  }
               ]
            },
            "overrides": [
               {
                  "matcher": {
                     "id": "byName",
                     "options": "SLO Status"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "percent"
                     },
                     {
                        "id": "custom.displayMode",
                        "value": "basic"
                     },
                     {
                        "id": "thresholds",
                        "value": {
                           "mode": "absolute",
                           "steps": [
                              {
                                 "color": "rgba(86, 166, 75, 0.01)"
                              },
                              {
                                 "color": "red",
                                 "value": 1
                              },
                              {
                                 "color": "#EAB839",
                                 "value": 90
                              },
                              {
                                 "color": "green",
                                 "value": 95
                              }
                           ]
                        }
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "% Change"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "percent"
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "Coverage"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "none"
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "Traffic"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "none"
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "environment"
                  },
                  "properties": [
                     {
                        "id": "custom.width",
                        "value": "2"
                     }
                  ]
               }
            ]
         },
         "gridPos": {
            "h": 10,
            "w": 24
         },
         "id": 2,
         "targets": [
            {
               "expr": "avg(avg_over_time(sli_percentage{environment=\"$environment\"}[30d])) by (service) * 100",
               "format": "table",
               "instant": true,
               "intervalFactor": 2,
               "legendFormat": "SLO Status",
               "refId": "A"
            },
            {
               "expr": "(avg(avg_over_time(sli_percentage{environment=\"$environment\"}[30d])) by (service) - \n        avg(avg_over_time(sli_percentage{environment=\"$environment\"}[30d] offset 30d)) by (service))    \n        / (avg(avg_over_time(sli_percentage{environment=\"$environment\"}[30d])) by (service)) * 100",
               "format": "table",
               "instant": true,
               "intervalFactor": 2,
               "legendFormat": "% Change",
               "refId": "B"
            },
            {
               "expr": "count by (service)(count_over_time((sli_value{environment=\"$environment\"} < bool Inf)[30d:10m]))",
               "format": "table",
               "instant": true,
               "intervalFactor": 2,
               "legendFormat": "SLO Coverage",
               "refId": "C"
            },
            {
               "expr": "(sum(sum_over_time(aggregated_alb_request_count_sum{environment=\"$environment\"}[30d])) by (service))",
               "format": "table",
               "instant": true,
               "intervalFactor": 2,
               "legendFormat": "Traffic",
               "refId": "D"
            }
         ],
         "title": "SLO Status Aggregated by Service",
         "transformations": [
            {
               "id": "labelsToFields"
            },
            {
               "id": "organize",
               "options": {
                  "excludeByName": {
                     "Time": true
                  },
                  "renameByName": {
                     "Value #A": "SLO Status",
                     "Value #B": "% Change",
                     "Value #C": "SLO Coverage",
                     "Value #D": "Traffic",
                     "environment": "Environment",
                     "service": "Service"
                  }
               }
            }
         ],
         "type": "table"
      },
      {
         "datasource": "prometheus",
         "fieldConfig": {
            "defaults": {
               "custom": {
                  "align": "left"
               },
               "links": [
                  {
                     "title": "${__data.fields.service} product view",
                     "url": "/d/${__data.fields.service}-product-view?${environment:queryparam}"
                  }
               ]
            },
            "overrides": [
               {
                  "matcher": {
                     "id": "byName",
                     "options": "Availability"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "percent"
                     },
                     {
                        "id": "custom.displayMode",
                        "value": "basic"
                     },
                     {
                        "id": "thresholds",
                        "value": {
                           "mode": "absolute",
                           "steps": [
                              {
                                 "color": "rgba(86, 166, 75, 0.01)"
                              },
                              {
                                 "color": "red",
                                 "value": 1
                              },
                              {
                                 "color": "#EAB839",
                                 "value": 90
                              },
                              {
                                 "color": "green",
                                 "value": 95
                              }
                           ]
                        }
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "Latency"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "percent"
                     },
                     {
                        "id": "custom.displayMode",
                        "value": "basic"
                     },
                     {
                        "id": "thresholds",
                        "value": {
                           "mode": "absolute",
                           "steps": [
                              {
                                 "color": "rgba(86, 166, 75, 0.01)"
                              },
                              {
                                 "color": "red",
                                 "value": 1
                              },
                              {
                                 "color": "#EAB839",
                                 "value": 90
                              },
                              {
                                 "color": "green",
                                 "value": 95
                              }
                           ]
                        }
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "Pipeline Correctness"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "percent"
                     },
                     {
                        "id": "custom.displayMode",
                        "value": "basic"
                     },
                     {
                        "id": "thresholds",
                        "value": {
                           "mode": "absolute",
                           "steps": [
                              {
                                 "color": "rgba(86, 166, 75, 0.01)"
                              },
                              {
                                 "color": "red",
                                 "value": 1
                              },
                              {
                                 "color": "#EAB839",
                                 "value": 90
                              },
                              {
                                 "color": "green",
                                 "value": 95
                              }
                           ]
                        }
                     }
                  ]
               },
               {
                  "matcher": {
                     "id": "byName",
                     "options": "Pipeline Freshness"
                  },
                  "properties": [
                     {
                        "id": "unit",
                        "value": "percent"
                     },
                     {
                        "id": "custom.displayMode",
                        "value": "basic"
                     },
                     {
                        "id": "thresholds",
                        "value": {
                           "mode": "absolute",
                           "steps": [
                              {
                                 "color": "rgba(86, 166, 75, 0.01)"
                              },
                              {
                                 "color": "red",
                                 "value": 1
                              },
                              {
                                 "color": "#EAB839",
                                 "value": 90
                              },
                              {
                                 "color": "green",
                                 "value": 95
                              }
                           ]
                        }
                     }
                  ]
               }
            ]
         },
         "gridPos": {
            "h": 10,
            "w": 24
         },
         "id": 3,
         "targets": [
            {
               "expr": "avg(avg_over_time(sli_percentage{environment=\"$environment\"}[30d])) by (service, category) * 100",
               "format": "time_series",
               "instant": true,
               "intervalFactor": 2,
               "legendFormat": "SLO Status",
               "refId": "A"
            }
         ],
         "title": "SLO Status Aggregated by Service and SLI Category",
         "transformations": [
            {
               "id": "labelsToFields",
               "options": {
                  "valueLabel": "category"
               }
            },
            {
               "id": "organize",
               "options": {
                  "excludeByName": {
                     "Time": true,
                     "Value": true
                  },
                  "indexByName": {
                     "Availability": 3,
                     "Latency": 4,
                     "Pipeline Correctness": 5,
                     "Pipeline Freshness": 6,
                     "Time": 0,
                     "Value": 7,
                     "service": 2
                  },
                  "renameByName": {
                     "service": "Service"
                  }
               }
            }
         ],
         "type": "table"
      }
   ],
   "refresh": "5m",
   "rows": [ ],
   "schemaVersion": 18,
   "style": "dark",
   "tags": [
      "mac-version: 65-migrate-monitoring-as-code-base-files-to-github",
      "summary-view"
   ],
   "templating": {
      "list": [
         {
            "allValue": null,
            "current": { },
            "datasource": "prometheus",
            "hide": 0,
            "includeAll": false,
            "label": "Environment",
            "multi": false,
            "name": "environment",
            "options": [ ],
            "query": "label_values(environment)",
            "refresh": 1,
            "regex": "",
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [ ],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
         }
      ]
   },
   "time": {
      "from": "now-3h",
      "to": "now"
   },
   "timepicker": {
      "refresh_intervals": [
         "5s",
         "10s",
         "30s",
         "1m",
         "5m",
         "15m",
         "30m",
         "1h",
         "2h",
         "1d"
      ],
      "time_options": [
         "5m",
         "15m",
         "1h",
         "6h",
         "12h",
         "24h",
         "2d",
         "7d",
         "30d"
      ]
   },
   "timezone": "browser",
   "title": "summary-view",
   "uid": "summary-view",
   "version": 0
}
